<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">tanks_scaffold</a> &gt; <a href="index.source.html" class="el_package">Tanks</a> &gt; <span class="el_source">UI.java</span></div><h1>UI.java</h1><pre class="source lang-java linenums">package Tanks;

import java.util.ArrayList;
import java.util.Collection;

import processing.core.PImage;

public class UI {

    private ArrayList&lt;Tankpiece&gt; listOfTankpieces;
<span class="fc" id="L11">    private boolean ifIterate = false;</span>
<span class="fc" id="L12">    private boolean ifUpdateTime = true;</span>
    private float start;
    private float finish;
<span class="fc" id="L15">    private int i = 1;</span>

    /**
     * Constructor for UI
     * 
     * @param listOfTankpieces an arraylist consists of Tankpieces
     */
<span class="fc" id="L22">    public UI(ArrayList&lt;Tankpiece&gt; listOfTankpieces) {</span>

<span class="fc" id="L24">        this.listOfTankpieces = listOfTankpieces;</span>

<span class="fc" id="L26">    }</span>

    /**
     * Sorting tank using the point(in descending order)
     * 
     * @param list an arraylist consists of Tankpieces
     * @return an arraylist consists of Tankpieces in sorted order
     */
    public ArrayList&lt;Tankpiece&gt; sortTank(ArrayList&lt;Tankpiece&gt; list) {
<span class="fc" id="L35">        ArrayList&lt;Tankpiece&gt; new_ArrayList = new ArrayList&lt;Tankpiece&gt;();</span>
<span class="fc bfc" id="L36" title="All 2 branches covered.">        while (list.size() &gt; 0) {</span>
<span class="fc" id="L37">            Tankpiece maxArray = list.get(0);</span>
<span class="fc" id="L38">            int maxNum = maxArray.getPoint();</span>

<span class="fc bfc" id="L40" title="All 2 branches covered.">            for (int i = 1; i &lt; list.size(); i++) {</span>
<span class="fc" id="L41">                Tankpiece tempArray = list.get(i);</span>
<span class="fc" id="L42">                int tempNum = tempArray.getPoint();</span>
<span class="fc bfc" id="L43" title="All 2 branches covered.">                if (tempNum &gt; maxNum) {</span>
<span class="fc" id="L44">                    maxArray = tempArray;</span>
<span class="fc" id="L45">                    maxNum = tempNum;</span>
                }

            }
<span class="fc" id="L49">            new_ArrayList.add(maxArray);</span>
<span class="fc" id="L50">            list.remove(list.indexOf(maxArray));</span>

<span class="fc" id="L52">        }</span>

<span class="fc" id="L54">        return new_ArrayList;</span>
    }

    /**
     * Drawing scoreboard when the game ends
     * 
     * @param app app from App
     */
    public void endGameUI(App app) {

<span class="fc" id="L64">        app.fill(255, 102, 102, 200);</span>
<span class="fc" id="L65">        app.stroke(0);</span>
<span class="fc" id="L66">        app.strokeWeight(4);</span>
<span class="fc" id="L67">        app.rect(250, 150, 400, listOfTankpieces.size() * 40 + 25);</span>
<span class="fc" id="L68">        app.rect(250, 150, 400, 40f);</span>

<span class="fc" id="L70">        app.fill(0);</span>
<span class="fc" id="L71">        app.textSize(20);</span>
<span class="fc" id="L72">        app.text(&quot;Final Scores&quot;, 260, 175);</span>
<span class="fc" id="L73">        ArrayList&lt;Tankpiece&gt; listOfTankpiecesCopy = new ArrayList&lt;Tankpiece&gt;(listOfTankpieces);</span>
<span class="fc" id="L74">        listOfTankpiecesCopy = sortTank(listOfTankpiecesCopy);</span>

<span class="fc" id="L76">        app.fill(Float.parseFloat(listOfTankpiecesCopy.get(0).getColor()[0]),</span>
<span class="fc" id="L77">                Float.parseFloat(listOfTankpiecesCopy.get(0).getColor()[1]),</span>
<span class="fc" id="L78">                Float.parseFloat(listOfTankpiecesCopy.get(0).getColor()[2]));</span>
<span class="fc" id="L79">        app.text(&quot;Player &quot; + listOfTankpiecesCopy.get(0).getCallSign() + &quot; wins!&quot;, 260, 130);</span>

<span class="fc" id="L81">        int k = 0;</span>
<span class="fc" id="L82">        finish = System.nanoTime();</span>
<span class="fc bfc" id="L83" title="All 2 branches covered.">        for (; k &lt; i;) {</span>
<span class="fc" id="L84">            app.fill(Float.parseFloat(listOfTankpiecesCopy.get(k).getColor()[0]),</span>
<span class="fc" id="L85">                    Float.parseFloat(listOfTankpiecesCopy.get(k).getColor()[1]),</span>
<span class="fc" id="L86">                    Float.parseFloat(listOfTankpiecesCopy.get(k).getColor()[2]));</span>
<span class="fc" id="L87">            app.text(&quot;Player &quot; + listOfTankpiecesCopy.get(k).getCallSign(), 260, 220 + k * 35);</span>

<span class="fc" id="L89">            app.fill(0);</span>
<span class="fc" id="L90">            app.text(listOfTankpiecesCopy.get(k).getPoint(), 550, 220 + k * 35);</span>
<span class="fc bfc" id="L91" title="All 2 branches covered.">            if (ifUpdateTime) {</span>
                // System.out.println(&quot;Entered&quot;);
<span class="fc" id="L93">                start = System.nanoTime();</span>
<span class="fc" id="L94">                ifUpdateTime = false;</span>

            }

<span class="fc" id="L98">            k += 1;</span>

        }

<span class="fc bfc" id="L102" title="All 4 branches covered.">        if (finish - start &gt; 0.7 * 1000000000 &amp;&amp; i &lt; listOfTankpiecesCopy.size()) {</span>
<span class="fc" id="L103">            ifIterate = true;</span>
        }
<span class="fc bfc" id="L105" title="All 2 branches covered.">        if (ifIterate) {</span>

<span class="fc" id="L107">            i += 1;</span>
<span class="fc" id="L108">            ifIterate = false;</span>
<span class="fc" id="L109">            ifUpdateTime = true;</span>
<span class="fc bfc" id="L110" title="All 2 branches covered.">            if (i &gt;= listOfTankpiecesCopy.size()) {</span>
<span class="fc" id="L111">                i = listOfTankpiecesCopy.size();</span>
<span class="fc" id="L112">                ifIterate = false;</span>
<span class="fc" id="L113">                ifUpdateTime = false;</span>

            }
        }

<span class="fc" id="L118">    }</span>

    /**
     * Draw UI for the game
     * 
     * @param app           app from App
     * @param fuel_img      fuel image
     * @param parachute_img parachute image
     * @param current       currentPlayer of the game
     * @param projDisplay   whether to display large projectile
     * @param gameEnd       whether the game end
     */
    public void draw(App app, PImage fuel_img, PImage parachute_img, Tankpiece current, boolean projDisplay,
            boolean gameEnd) {
<span class="fc" id="L132">        app.textSize(18);</span>
<span class="fc" id="L133">        app.text(&quot;Player &quot; + current.getCallSign() + &quot;'s turn&quot;, 15, 25);</span>

<span class="fc" id="L135">        fuel_img.resize(25, 25);</span>
<span class="fc" id="L136">        app.image(fuel_img, 160, 5);</span>
<span class="fc" id="L137">        app.text(current.getFuel(), 190, 25); // disp fuel</span>

<span class="fc" id="L139">        parachute_img.resize(25, 25);</span>
<span class="fc" id="L140">        app.image(parachute_img, 160, 35);</span>
<span class="fc" id="L141">        app.text(current.getParachute(), 195, 55); // disp parachute</span>

<span class="fc" id="L143">        app.noFill();</span>
<span class="fc" id="L144">        app.stroke(0);</span>
<span class="fc" id="L145">        app.strokeWeight(3);</span>
<span class="fc" id="L146">        app.rect(435, 8, 102 * 1.5f, 25); // disp hp outline</span>

<span class="fc" id="L148">        app.fill(Float.parseFloat(current.getColor()[0]), Float.parseFloat(current.getColor()[1]),</span>
<span class="fc" id="L149">                Float.parseFloat(current.getColor()[2]));</span>
<span class="fc" id="L150">        app.noStroke();</span>
<span class="fc" id="L151">        app.rect(437, 10.25f, current.getHp() * 1.5f, 21.5f);// draw hp rect</span>

<span class="fc" id="L153">        app.strokeWeight(5);</span>
<span class="fc" id="L154">        app.stroke(169, 169, 169);</span>
<span class="fc" id="L155">        app.noFill();</span>
<span class="fc" id="L156">        app.rect(435, 9.5f, current.getPower() * 1.5f, 25);// disp power range on hp</span>

<span class="fc" id="L158">        app.stroke(255, 0, 0);// draw power line</span>
<span class="fc" id="L159">        app.strokeWeight(1);</span>
<span class="fc" id="L160">        app.line(435 + current.getPower() * 1.5f, 4, 435 + current.getPower() * 1.5f, 40);</span>

<span class="fc" id="L162">        app.fill(0);</span>
<span class="fc" id="L163">        app.text(&quot;Health:&quot;, 365, 25);</span>
<span class="fc" id="L164">        app.text(current.getHp(), 445 + 100 * 1.5f, 27.5f);</span>
<span class="fc" id="L165">        app.text(&quot;Power:&quot;, 365, 52f);</span>
<span class="fc" id="L166">        app.text(current.getPower(), 430, 52.5f);</span>

        // scoreboard
<span class="fc bfc" id="L169" title="All 2 branches covered.">        if (!gameEnd) {</span>
<span class="fc" id="L170">            app.noFill();</span>
<span class="fc" id="L171">            app.stroke(0);</span>
<span class="fc" id="L172">            app.strokeWeight(4);</span>
<span class="fc" id="L173">            app.rect(715, 52.25f, 140, listOfTankpieces.size() * 20 + 25);</span>
<span class="fc" id="L174">            app.rect(715, 52.25f, 140, 20f);</span>

<span class="fc" id="L176">            app.text(&quot;Scores&quot;, 720, 69.5f);</span>
<span class="fc" id="L177">            int i = 0;</span>
<span class="fc bfc" id="L178" title="All 2 branches covered.">            for (Tankpiece t : listOfTankpieces) {</span>

<span class="fc" id="L180">                app.fill(Float.parseFloat(t.getColor()[0]), Float.parseFloat(t.getColor()[1]),</span>
<span class="fc" id="L181">                        Float.parseFloat(t.getColor()[2]));</span>
<span class="fc" id="L182">                app.text(&quot;Player &quot; + t.getCallSign(), 720, 90 + i * 20);</span>
<span class="fc" id="L183">                i += 1;</span>
<span class="fc" id="L184">                app.fill(0);</span>
<span class="fc" id="L185">                app.text(t.getPoint(), 820, 70 + i * 20);</span>
<span class="fc" id="L186">            }</span>
<span class="fc bfc" id="L187" title="All 2 branches covered.">            if (!projDisplay) {</span>
<span class="fc" id="L188">                app.fill(Float.parseFloat(current.getColor()[0]), Float.parseFloat(current.getColor()[1]),</span>
<span class="fc" id="L189">                        Float.parseFloat(current.getColor()[2]));</span>
<span class="fc" id="L190">                app.text(&quot;Large projectile&quot;, 100, 100);</span>
            }

        }

<span class="fc" id="L195">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>